name: Sincronizar con Hugging Face Space

on:
  # Se ejecuta autom치ticamente en cada push a la rama principal
  push:
    branches: [ main ]
  
  # Permite ejecutar el workflow manualmente desde la pesta침a Actions
  workflow_dispatch:

jobs:
  sync-to-huggingface:
    name: Sincronizar repositorio con Hugging Face Space
    runs-on: ubuntu-latest
    
    steps:
      # Paso 1: Descargar el c칩digo del repositorio
      - name: Checkout del repositorio
        uses: actions/checkout@v3
        with:
          # Configuraci칩n profunda para clonar todo el historial (necesario para --force)
          fetch-depth: 0
          # Habilita Git LFS para manejar archivos grandes si los hay
          lfs: true
      
      # Paso 2: Configurar Git con usuario y email
      - name: Configurar Git
        run: |
          git config --global user.name "github-actions"
          git config --global user.email "github-actions@github.com"
      
      # Paso 3: Sincronizar con Hugging Face Space usando force push
      - name: Forzar push al Space de Hugging Face
        env:
          # Usa el token almacenado en los secrets de GitHub
          TOKEN: ${{ secrets.HF_TOKEN3 }}
        run: |
          # URL formateada para push forzado al Space especificado
          # Formato: https://USUARIO:TOKEN@huggingface.co/spaces/USUARIO/NOMBRE_SPACE
          git push --force https://goovylive:${TOKEN}@huggingface.co/spaces/goovylive/grafica-implicita main
          
          # Nota: --force es necesario para sobrescribir la plantilla inicial de Hugging Face
          # y reemplazarla completamente con el contenido de este repositorio
